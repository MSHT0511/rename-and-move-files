# ファイル整理自動化ツール

ファイルを作成日時でリネームし、月別フォルダに自動整理するPythonスクリプトです。

## 機能

- 指定フォルダ内のファイルを作成日時で自動リネーム
- リネーム形式: `YYYYMMDD_HHMMSS.拡張子` (例: `20240315_143022.jpg`)
- 月別フォルダに自動移動: `YYYY_MM` (例: `2024_03`)
- 同名ファイルが既に存在する場合は自動的にスキップ
- 処理結果の詳細レポート表示

## 対応ファイル形式

### 画像ファイル
`.jpg`, `.jpeg`, `.png`, `.gif`, `.bmp`, `.webp`, `.tiff`

### 動画ファイル
`.mp4`, `.mov`, `.avi`, `.mkv`

### 文書ファイル
`.pdf`, `.docx`, `.xlsx`, `.pptx`, `.txt`, `.csv`

### 圧縮ファイル
`.zip`, `.rar`

## インストール

### 1. Python環境
Python 3.7以上が必要です。

### 2. 依存関係のインストール

#### 実行のみの場合
外部ライブラリは不要です（Python標準ライブラリのみ使用）。

#### 開発・テスト環境の場合
```bash
pip install -r requirements.txt
```

## 使用方法

### 基本的な使い方

```bash
python rename_files.py <対象フォルダのパス>
```

### 使用例

```bash
# カレントディレクトリのダウンロードフォルダを整理
python rename_files.py ./downloads

# 絶対パスで指定
python rename_files.py C:\Users\YourName\Pictures
```

## 動作例

### 実行前のフォルダ構造
```
target_folder/
├── IMG_1234.jpg
├── video_001.mp4
├── document.pdf
└── photo.png
```

### 実行後のフォルダ構造
```
target_folder/
├── 2024_03/
│   ├── 20240315_143022.jpg
│   └── 20240315_150130.mp4
└── 2024_04/
    ├── 20240401_091500.pdf
    └── 20240401_120000.png
```

## 注意事項

- **バックアップを推奨**: 初めて使用する際は、必ず対象フォルダのバックアップを取ってください
- **同名ファイル**: 同じ作成日時のファイルが複数ある場合、2つ目以降はスキップされます
- **サブフォルダ**: サブフォルダ内のファイルは処理対象外です（直下のファイルのみ）
- **対象外の拡張子**: 上記の対応ファイル形式以外のファイルは無視されます

## テスト実行

```bash
# テストの実行
pytest

# カバレッジ付きテスト
pytest --cov=rename_files
```

## テスト内容

- ファイルのリネーム機能
- 月別フォルダへの移動機能
- 同名ファイルのスキップ処理
- 非対象拡張子の除外
- 空フォルダの処理

## 技術仕様

- **言語**: Python 3.7+
- **依存関係**: 標準ライブラリのみ
  - `argparse`: コマンドライン引数解析
  - `os`: ファイルシステム操作
  - `shutil`: ファイル移動
  - `pathlib`: パス操作
  - `datetime`: 日時処理

## ライセンス

このプロジェクトにはライセンスが設定されていません。

## 開発について

このプロジェクトは個人開発として作成されました。基本的にメンテナンスは行いませんが、バグ報告や改善提案は歓迎します。
